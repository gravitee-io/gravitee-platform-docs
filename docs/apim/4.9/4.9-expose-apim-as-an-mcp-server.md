# Expose APIM as an MCP Server

## Overview

This article explains how to install and use the Gravitee API Management (APIM) Model Context Protocol (MCP) Server. With this MCP server, you can interact with Gravitee APIM using natural language AI assistants and other MCP-compatible clients.

The MCP Server is generated from the API v2 OpenAPI specification. It exposes its functionality as a set of tools for an LLM to use.

For more information about how the MCP server is configured, go to [gravitee-apim-mcp server.](https://github.com/gravitee-io/gravitee-apim-mcp-server)

## Prerequisites

* Node.js v18+
* Npm
* A Gravitee APIM instance. You can install Gravitee APIM using any of the following methods:
  * Self-hosted installation. For more information about self-hosted installations, see [self-hosted-installation-guides](self-hosted-installation-guides/ "mention").
  * Cloud deployment. To sign up for a Cloud version of APIM, see [Cloud](https://eu-auth.cloud.gravitee.io/cloud/register?response_type=code\&client_id=fd45d898-e621-4b12-85d8-98e621ab1237\&state=LnE2a3paZVpvci1XS2lVZVM4aX40Tmh6S0xJLmhQR0hjeDlWWmpzMFljM2JV\&redirect_uri=https%3A%2F%2Feu.cloud.gravitee.io\&scope=openid+profile+email+offline_access\&code_challenge=KZe5fohAzNEeytArXgWyk9BLw5iq_llPtVYvhh8cqAc\&code_challenge_method=S256\&nonce=LnE2a3paZVpvci1XS2lVZVM4aX40Tmh6S0xJLmhQR0hjeDlWWmpzMFljM2JV\&createUser=true\&hubspotutk=640db1914414dc8d82a03c4db2c797de).

## Install the MCP Server

To install the APIM MCP Server, complete the following steps:

1. [#install-the-mcp-server](4.9-expose-apim-as-an-mcp-server.md#install-the-mcp-server "mention")
2. [#create-a-service-account-and-generate-a-token](4.9-expose-apim-as-an-mcp-server.md#create-a-service-account-and-generate-a-token "mention")
3. [#install-the-mcp-server-in-your-mcp-client](4.9-expose-apim-as-an-mcp-server.md#install-the-mcp-server-in-your-mcp-client "mention")

### Create a service account and generate a token

1. Sign in to your APIM Console.
2.  From the **Dashboard**, click **Organization**.\\

    <figure><img src=".gitbook/assets/image (414).png" alt=""><figcaption></figcaption></figure>
3.  From the **Organization** menu, click **Users**.\\

    <figure><img src=".gitbook/assets/image (415).png" alt=""><figcaption></figcaption></figure>
4.  Click **Add user**. \\

    <figure><img src=".gitbook/assets/image (416).png" alt=""><figcaption></figcaption></figure>
5.  In the **Pre-register a user** screen, create the service account. To create a service account, complete the following sub-steps:

    1. Select **Service Account**.
    2. In the **Service Name** field, enter a name for the Service Account. For example, mcp-server-user.
    3. (Optional) Enter the email address associated with the service account.
    4. Click **Create**.\\

    <figure><img src=".gitbook/assets/image (418).png" alt=""><figcaption></figcaption></figure>
6.  In the **Users** screen, click the service account that you created. \\

    <figure><img src=".gitbook/assets/image (419).png" alt=""><figcaption></figcaption></figure>
7.  In the **User details** screen, assign the service account permissions. The AI assistant's capabilities are determined by the permissions you set for the service account. \\

    \{% hint style="info" %\} For information about the permissions that you need to set for a specific action, see [management-api-reference.md](management-api-reference.md "mention"). \{% endhint %\}

    <figure><img src=".gitbook/assets/image (420).png" alt=""><figcaption></figcaption></figure>
8.  In the **You have unsaved changes** pop-up window, click **Save**.\\

    <figure><img src=".gitbook/assets/image (421).png" alt=""><figcaption></figcaption></figure>
9.  Navigate to the **Tokens** section, and then click **+ Generate a personal token**. \\

    <figure><img src=".gitbook/assets/image (412).png" alt=""><figcaption></figcaption></figure>
10. In the **Generate a token** pop-up window, enter a name for your token. For example, mcp-server-token.
11. Click **Generate**. \\

    <figure><img src=".gitbook/assets/image (413).png" alt=""><figcaption></figcaption></figure>
12. Copy the token, and then store it somewhere safe.
13. Click **Close**.\\

    \{% hint style="warning" %\} You cannot view your token after you click **Close.** \{% endhint %\}

    <figure><img src=".gitbook/assets/C8A38BA2-E033-4F88-AB72-4DB7CBAA9323_1_201_a.jpeg" alt=""><figcaption></figcaption></figure>

### Clone and build the MCP Server

*   Clone and build the MCP server using the following commands: \\

    ```
    # Clone the repository
    git clone https://github.com/gravitee-io/gravitee-apim-mcp-server.git
    cd gravitee-apim-mcp-server

    # Install dependencies
    npm install

    # Build the project
    npm run build

    # The server executable is now available at ./bin/mcp-server.js
    ```

### Install the MCP Server in your MCP Client

{% hint style="info" %}
For more information about installing the MCP Server in specific MCP Clients, go to[ gravitee-apim-mcp server.](https://github.com/gravitee-io/gravitee-apim-mcp-server)
{% endhint %}

*   To add the MCP Server in your MCP Client, you must use the `--bearer-auth` and `--server-url` arguments. Here is the following configuration that you can use to add the MCP Server to your MCP Client.\\

    ```json
    {
      "mcpServers": {
        "GraviteeApim": {
          "command": "node",
          "args": [
            "/absolute/path/to/gravitee-apim-mcp-server/bin/mcp-server.js",
            "start",
            "--bearer-auth",
            "YOUR_BEARER_TOKEN",
            "--server-url",
            "https://your-management-api-url/management/v2"
          ]
        }
      }
    }
    ```

    * Replace `</absolute/path/to/gravitee-apim-mcp-server/bin/mcp-server.js>` with the absolute path to the location of your `mcp-server.js` file.
    * Replace `<YOUR_BEARER_TOKEN>` with the token that you created in the [#create-a-service-account-and-generate-a-token](4.9-expose-apim-as-an-mcp-server.md#create-a-service-account-and-generate-a-token "mention") section.
    * Replace `<https://your-management-api-url/management/v2>` with the server URL for your installation:
      * Self-hosted URL: The server URL is the base URL of your Management API. For example, `http://localhost:8083/management/v2`.
      * Cloud: The server URL is your organization-specific API URL. For example, `https://<your-org>.<region>.api.gravitee.io/management/v2`.
